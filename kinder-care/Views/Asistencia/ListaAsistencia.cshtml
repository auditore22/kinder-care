@model IEnumerable<kinder_care.Models.Asistencia>

<div class="breadcrumb-with-buttons mb-24 flex-between flex-wrap gap-8">
    <!-- Breadcrumb -->
    <div class="breadcrumb mb-24">
        <ul class="flex-align gap-4">
            <li>
                <a asp-action="Index" asp-controller="Home" class="text-gray-200 fw-normal text-15 hover-text-main-600">Inicio</a>
            </li>
            <li>
                <span class="text-gray-500 fw-normal d-flex">
                    <i class="ph ph-caret-right"></i>
                </span>
            </li>
            <li>
                <span class="text-main-600 fw-normal text-15">Historial de Asistencias</span>
            </li>
        </ul>
    </div>
</div>

<!-- Formulario de filtros -->
<form asp-action="ListaAsistencia" method="get" class="card mb-24 p-16">
    <div class="row">
        <div class="col-md-4">
            <label for="fechaInicio" class="form-label">Fecha Inicio</label>
            <input type="date" name="fechaInicio" id="fechaInicio" class="form-control"
                   value="@ViewBag.FechaInicio" />
        </div>
        <div class="col-md-4">
            <label for="fechaFin" class="form-label">Fecha Fin</label>
            <input type="date" name="fechaFin" id="fechaFin" class="form-control"
                   value="@ViewBag.FechaFin" />
        </div>
        <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-main w-100">Filtrar</button>
        </div>
    </div>
</form>

<!-- Tabla de resultados -->
<div class="card overflow-hidden">
    <div class="card-body p-0 overflow-x-auto">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th class="h6 text-gray-300">ID Niño</th>
                    <th class="h6 text-gray-300">Estudiante</th>
                    <th class="h6 text-gray-300">Fecha</th>
                    <th class="h6 text-gray-300">Presente</th>
                </tr>
            </thead>
            <tbody>
                @if (!Model.Any())
                {
                    <tr>
                        <td colspan="4" class="text-center text-gray-500">No se encontraron registros.</td>
                    </tr>
                }
                else
                {
                    @foreach (var asistencia in Model)
                    {
                        <tr>
                            <td>
                                <span class="h6 mb-0 fw-medium text-gray-300">@asistencia.IdNino</span>
                            </td>
                            <td>
                                <span class="h6 mb-0 fw-medium text-gray-300">@asistencia.IdNinoNavigation.NombreNino</span>
                            </td>
                            <td>
                                <span class="h6 mb-0 fw-medium text-gray-300">@asistencia.Fecha.ToString("yyyy-MM-dd")</span>
                            </td>
                            <td>
                                <span class="h6 mb-0 fw-medium @(asistencia.Presente ? "text-success" : "text-danger")">
                                    @(asistencia.Presente ? "Presente" : "Ausente")
                                </span>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>

    </div>
</div>

<div class="card-footer flex-between flex-wrap mt-6">
    <span class="text-gray-900">Mostrando @Model.Count() de un maximo de 10 entrantes</span>
    <ul class="pagination flex-align flex-wrap">
        <form asp-action="GenerarReportePDF" asp-controller="Asistencia" method="get" class="mb-3">
            <input type="hidden" name="fechaInicio" value="@ViewBag.FechaInicio" />
            <input type="hidden" name="fechaFin" value="@ViewBag.FechaFin" />
            <button type="submit" class="btn btn-primary">Generar PDF</button>
        </form>
    </ul>
</div>
