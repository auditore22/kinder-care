@model Ninos

<!-- Breadcrumb Start -->
<div class="breadcrumb mb-24">
    <ul class="flex-align gap-4">
        <li>
            <a asp-action="Index" asp-controller="Home"
               class="text-gray-200 fw-normal text-15 hover-text-main-600">
                Inicio
            </a>
        </li>
        <li>
            <span class="text-gray-500 fw-normal d-flex">
                <i class="ph ph-caret-right"></i>
            </span>
        </li>
        <li>
            <span class="text-main-600 fw-normal text-15">Hijos: @Model.NombreNino</span>
        </li>
    </ul>
</div>
<!-- Breadcrumb End -->

<div class="card overflow-hidden">
    <div class="card-body p-0">
        <div class="cover-img position-relative">
            <div class="avatar-upload">
                <input type="file" id="coverImageUpload" accept=".png, .jpg, .jpeg">
                <div class="avatar-preview">
                    <div id="coverImagePreview"
                         style="background: rgb(0,141,219); background: linear-gradient(180deg, rgba(0,141,219,0.5041666324733018) 0%, rgba(0,170,219,0) 76%);">
                    </div>
                </div>
            </div>
        </div>

        <div class="setting-profile px-24">
            <div class="flex-between">
                <div class="d-flex align-items-end flex-wrap mb-32 gap-24">
                    <img src="~/images/icons/baby_2_icon.png" alt=""
                         class="w-120 h-120 rounded-circle border border-white">
                    <div>
                        <h4 class="mb-8">@Model.NombreNino</h4>
                        <div class="setting-profile__infos flex-align flex-wrap gap-16">
                            <div class="flex-align gap-6">
                                <span class="text-gray-600 d-flex text-lg">
                                    <i class="ph ph-swatches"></i>
                                </span>
                                <span class="text-gray-600 d-flex text-15">@Model.Cedula</span>
                            </div>
                            <div class="flex-align gap-6">
                                <span class="text-gray-600 d-flex text-lg">
                                    <i class="ph ph-map-pin"></i>
                                </span>
                                <span class="text-gray-600 d-flex text-15">@Model.Direccion</span>
                            </div>
                            <div class="flex-align gap-6">
                                <span class="text-gray-600 d-flex text-lg">
                                    <i class="ph ph-calendar-dots"></i>
                                </span>
                                <span
                                    class="text-gray-600 d-flex text-15">
                                    @Model.FechaNacimiento.ToString("dd/MM/yyyy")
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ul class="nav common-tab style-two nav-pills mb-0" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-details-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-details" type="button" role="tab" aria-controls="pills-details"
                            aria-selected="true">
                        Detalles
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-onGoing-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-onGoing" type="button" role="tab" aria-controls="pills-onGoing"
                            aria-selected="false">
                        Tareas
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-edit-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-edit" type="button" role="tab" aria-controls="pills-edit"
                            aria-selected="false">
                        Editar
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-Edit_Contacto_Emergencia-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-Edit_Contacto_Emergencia" type="button" role="tab"
                            aria-controls="pills-Edit_Contacto_Emergencia" aria-selected="false">
                        Contactos de Emergencia
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-Edit_Info_Medica-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-Edit_Info_Medica" type="button" role="tab"
                            aria-controls="pills-Edit_Info_Medica" aria-selected="false">
                        Información Médica
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-Asistencias-tab"
                            data-bs-toggle="pill" data-bs-target="#pills-Asistencias" type="button" role="tab"
                            aria-controls="pills-Asistencias" aria-selected="false">
                        Asistencias
                    </button>
                </li>
            </ul>

        </div>

    </div>
</div>

<div class="tab-content" id="pills-tabContent">
<!-- Detalles Tab start -->
<div class="tab-pane fade show active" id="pills-details" role="tabpanel" aria-labelledby="pills-details-tab">
    <div class="card mt-24">
        <div class="card-header border-bottom">
            <h4 class="mb-4">Detalles</h4>
        </div>
        <div class="card-body">
            <div class="row gy-4">
                <ul>
                    <!-- Contactos de Emergencia -->

                    <h5>
                        <strong>Contactos de Emergencia:</strong>
                    </h5>

                    @if (Model.RelNinoContactoEmergencia.Any())
                    {
                        @foreach (var contacto in Model.RelNinoContactoEmergencia)
                        {
                            <li class="flex-align gap-6 text-black text-15 mb-12">
                                <span class="flex-shrink-0 text-22 d-flex text-main-600">
                                    <img style="height: 20px; width: 20px"
                                         src="~/images/icons/item_icon.png" alt="Información Médica"/>
                                </span>
                                <p>
                                    <strong>@contacto.ContactoEmergencia!.NombreContacto</strong> -
                                    Relación: @contacto.ContactoEmergencia.Relacion,
                                    Tel: @contacto.ContactoEmergencia.Telefono
                                </p>
                            </li>
                        }
                    }
                    else
                    {
                        <li class="flex-align gap-6 text-black text-15 mb-12">
                            <p class="text-gray-600">No se han registrado contactos de emergencia.</p>
                        </li>
                    }

                    <!-- Información Médica -->
                    <h5>
                        <strong>Información Médica:</strong>
                    </h5>

                    <li class="flex-align gap-6 text-black text-15 mb-12">
                        <span class="flex-shrink-0 text-22 d-flex text-main-600">
                            <img style="height: 20px; width: 20px"
                                 src="~/images/icons/Poliza_icon.png" alt="Información Médica"/>
                        </span>
                        <p>
                            <strong>Póliza:</strong> @Model.Poliza
                        </p>
                    </li>

                    <!-- Alergias -->
                    <li class="flex-align gap-6 text-black text-15 mb-12">
                        <span class="flex-shrink-0 text-22 d-flex text-main-600">
                            <img style="height: 20px; width: 20px"
                                 src="~/images/icons/Allergy_icon.png" alt="Alergias"/>
                        </span>
                        <p>
                            <strong>Alergias:</strong>
                        </p>
                    </li>
                    @if (Model.RelNinoAlergia.Any())
                    {
                        @foreach (var alergia in Model.RelNinoAlergia)
                        {
                            <li class="flex-align gap-6 text-black text-15 mb-12">
                                <span class="flex-shrink-0 text-22 d-flex text-main-600">
                                    <img style="height: 20px; width: 20px"
                                         src="~/images/icons/item_icon.png" alt="Información Médica"/>
                                </span>
                                <p>@alergia.Alergia!.NombreAlergia</p>
                            </li>
                        }
                    }
                    else
                    {
                        <li class="flex-align gap-6 text-black text-15 mb-12">
                            <p class="text-gray-600">No tiene alergias registradas.</p>
                        </li>
                    }

                    <!-- Medicamentos -->
                    <li class="flex-align gap-6 text-black text-15 mb-12">
                        <span class="flex-shrink-0 text-22 d-flex text-main-600">
                            <img style="height: 20px; width: 20px"
                                 src="~/images/icons/Medicine_icon.png" alt="Medicamentos"/>
                        </span>
                        <p>
                            <strong>Medicamentos:</strong>
                        </p>
                    </li>
                    @if (Model.RelNinoMedicamento.Any())
                    {
                        @foreach (var medicamento in Model.RelNinoMedicamento)
                        {
                            <li class="flex-align gap-6 text-black text-15 mb-12">
                                <span class="flex-shrink-0 text-22 d-flex text-main-600">
                                    <img style="height: 20px; width: 20px"
                                         src="~/images/icons/item_icon.png" alt="Información Médica"/>
                                </span>
                                <p>
                                    @medicamento.Medicamento!.NombreMedicamento -
                                    Dosis: @medicamento.Medicamento.Dosis
                                </p>
                            </li>
                        }
                    }
                    else
                    {
                        <li class="flex-align gap-6 text-black text-15 mb-12">
                            <p class="text-gray-600">No tiene medicamentos registrados.</p>
                        </li>
                    }

                    <!-- Condiciones Médicas -->
                    <li class="flex-align gap-6 text-black text-15 mb-12">
                        <span class="flex-shrink-0 text-22 d-flex text-main-600">
                            <img style="height: 20px; width: 20px"
                                 src="~/images/icons/Condition_icon.png" alt="Condiciones Médicas"/>
                        </span>
                        <p>
                            <strong>Condiciones Médicas:</strong>
                        </p>
                    </li>
                    @if (Model.RelNinoCondicion.Any())
                    {
                        @foreach (var condicion in Model.RelNinoCondicion)
                        {
                            <li class="flex-align gap-6 text-black text-15 mb-12">
                                <span class="flex-shrink-0 text-22 d-flex text-main-600">
                                    <img style="height: 20px; width: 20px"
                                         src="~/images/icons/item_icon.png" alt="Información Médica"/>
                                </span>
                                <p>@condicion.Condicion!.NombreCondicion</p>
                            </li>
                        }
                    }
                    else
                    {
                        <li class="flex-align gap-6 text-black text-15 mb-12">
                            <p class="text-gray-600">No tiene condiciones médicas registradas.</p>
                        </li>
                    }
                </ul>


            </div>
        </div>
    </div>
</div>
<!-- Detalles Tab End -->

<!-- Tareas Tab start -->
<!-- Pestaña Principal para Tareas -->
<div class="tab-pane fade" id="pills-onGoing" role="tabpanel" aria-labelledby="pills-onGoing-tab">
<div class="card mt-24">
<div class="card-header border-bottom">
    <h4 class="mb-4">Tareas</h4>
    <p class="text-gray-600 text-15">Elija qué tareas desea ver</p>
    <br/>
    <!-- Sub-pestañas -->
    <ul class="nav nav-pills mb-3" id="subPillsTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="subPills-ongoing-tab" data-bs-toggle="pill"
                    data-bs-target="#subPills-ongoing" type="button" role="tab"
                    aria-controls="subPills-ongoing" aria-selected="true">
                En Proceso
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="subPills-complete-tab" data-bs-toggle="pill"
                    data-bs-target="#subPills-complete" type="button" role="tab"
                    aria-controls="subPills-complete" aria-selected="false">
                Completadas
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="subPills-create-tab" data-bs-toggle="pill"
                    data-bs-target="#subPills-create" type="button" role="tab"
                    aria-controls="subPills-create" aria-selected="false">
                Crear Tareas
            </button>
        </li>
    </ul>
</div>
<!-- Contenido de las Sub-Pestañas -->
<div class="tab-content" id="subPillsTabContent">
<!-- Tareas En Proceso -->
<div class="tab-content" id="subPillsTabContent">
<!-- Tareas en Proceso -->
<div class="tab-pane fade show active" id="subPills-ongoing" role="tabpanel"
     aria-labelledby="subPills-ongoing-tab">
    <div class="card-body">
        <div class="row g-20">
            @if (ViewBag.TareasEnProceso != null)
            {
                foreach (var tarea in ViewBag.TareasEnProceso)
                {
                    <div class="col-xxl-3 col-lg-4 col-sm-6">
                        <div class="card border border-gray-100">
                            <div class="card-body p-8">
                                <a href="course-details.html"
                                   class="bg-main-100 rounded-8 overflow-hidden text-center mb-8 h-164 flex-center p-8">
                                    <img style="width: 150px; height: 150px"
                                         src="~/images/icons/tareas_enProgreso_icono.png"
                                         alt="Task Image">
                                </a>
                                <div class="p-8">
                                    <span
                                        class="text-13 py-2 px-10 rounded-pill bg-danger-50 text-danger-600 mb-16">
                                        En Progreso
                                    </span>
                                    <h5 class="mb-0">
                                        <a href="course-details.html"
                                           class="hover-text-main-600">
                                            @tarea.Nombre
                                        </a>
                                    </h5>
                                    <div class="flex-align gap-8 mt-12">
                                        <span
                                            class="text-main-600 flex-shrink-0 text-13 fw-medium">
                                            0%
                                        </span>
                                        <div class="progress w-100 bg-main-100 rounded-pill h-8"
                                             role="progressbar"
                                             aria-label="Basic example" aria-valuenow="0"
                                             aria-valuemin="0"
                                             aria-valuemax="100">
                                            <div class="progress-bar bg-main-600 rounded-pill"
                                                 style="width: 0%">
                                            </div>
                                        </div>
                                    </div>
                                    <div
                                        class="d-flex justify-content-between align-items-center mt-24">
                                        <!-- Botón Ver Más -->
                                        <a asp-action="Details_Tareas" asp-controller="Ninos"
                                           asp-route-id_nino="@Model.IdNino"
                                           asp-route-id_tarea="@tarea.IdTarea"
                                           class="btn btn-outline-main rounded-pill py-9"
                                           style="flex: 1; max-width: 150px;">
                                            Ver detalles
                                        </a>
                                        <!-- Botones Editar y Eliminar -->
                                        <div class="d-flex gap-2 ms-2">
                                            <a asp-action="Edit_Tarea" asp-controller="Tarea"
                                               asp-route-IdNino="@Model.IdNino"
                                               asp-route-IdTarea="@tarea.IdTarea"
                                               asp-route-idDocente="@ViewBag.DocenteId"
                                               class="btn p-0">
                                                <img src="~/images/icons/Editar_icon.png"
                                                     alt="Editar icono" class="rounded-circle"
                                                     style="width: 30px; height: 30px;">
                                            </a>
                                            <!-- Formulario para eliminar -->
                                            <form asp-action="Eliminar_Tarea" asp-controller="Tarea"
                                                  method="post" style="display: inline;">
                                                <input type="hidden" name="IdNino"
                                                       value="@Model.IdNino"/>
                                                <input type="hidden" name="IdTarea"
                                                       value="@tarea.IdTarea"/>
                                                <button type="submit" class="btn p-0">
                                                    <img src="~/images/icons/Eliminar_icon.png"
                                                         alt="Eliminar icono" class="rounded-circle"
                                                         style="width: 30px; height: 30px;">
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="alert alert-success">
                    <p><strong>@Model.NombreNino</strong> no tiene tareas en proceso</p>
                </div>
            }
        </div>
    </div>
</div>

<!-- Tareas Completadas -->
<div class="tab-pane fade" id="subPills-complete" role="tabpanel"
     aria-labelledby="subPills-complete-tab">
    <div class="card-body">
        <div class="row g-20">
            @if (ViewBag.TareasCompletadas != null)
            {
                foreach (var tarea in ViewBag.TareasCompletadas)
                {
                    <div class="col-xxl-3 col-lg-4 col-sm-6">
                        <div class="card border border-gray-100">
                            <div class="card-body p-8">
                                <a href="course-details.html"
                                   class="bg-main-100 rounded-8 overflow-hidden text-center mb-8 h-164 flex-center p-8">
                                    <img style="width: 150px; height: 150px"
                                         src="~/images/icons/tareas_completadas_icono.png"
                                         alt="Task Image">
                                </a>
                                <div class="p-8">
                                    <span
                                        class="text-13 py-2 px-10 rounded-pill bg-success-50 text-success-600 mb-16">
                                        Completada
                                    </span>
                                    <h5 class="mb-0">
                                        <a href="course-details.html"
                                           class="hover-text-main-600">
                                            @tarea.Nombre
                                        </a>
                                    </h5>
                                    <div class="flex-align gap-8 mt-12">
                                        <span
                                            class="text-success-600 flex-shrink-0 text-13 fw-medium">
                                            100%
                                        </span>
                                        <div class="progress w-100 bg-main-100 rounded-pill h-8"
                                             role="progressbar"
                                             aria-label="Basic example" aria-valuenow="100"
                                             aria-valuemin="0"
                                             aria-valuemax="100">
                                            <div class="progress-bar bg-success-600 rounded-pill"
                                                 style="width: 100%">
                                            </div>
                                        </div>
                                    </div>
                                    <div
                                        class="d-flex justify-content-between align-items-center mt-24">
                                        <!-- Botón Ver Más -->
                                        <a asp-action="Details_Tareas" asp-controller="Ninos"
                                           asp-route-id_nino="@Model.IdNino"
                                           asp-route-id_tarea="@tarea.IdTarea"
                                           class="btn btn-outline-main rounded-pill py-9"
                                           style="flex: 1; max-width: 150px;">
                                            Ver detalles
                                        </a>
                                        <!-- Botones Editar y Eliminar -->
                                        <div class="d-flex gap-2 ms-2">
                                            <a asp-action="Edit_Tarea" asp-controller="Tarea"
                                               asp-route-IdNino="@Model.IdNino"
                                               asp-route-IdTarea="@tarea.IdTarea"
                                               class="btn p-0">
                                                <img src="~/images/icons/Editar_icon.png"
                                                     alt="Editar icono" class="rounded-circle"
                                                     style="width: 30px; height: 30px;">
                                            </a>
                                            <!-- Formulario para eliminar -->
                                            <form asp-action="Eliminar_Tarea" asp-controller="Tarea"
                                                  method="post" style="display: inline;">
                                                <input type="hidden" name="IdNino"
                                                       value="@Model.IdNino"/>
                                                <input type="hidden" name="IdTarea"
                                                       value="@tarea.IdTarea"/>
                                                <button type="submit" class="btn p-0">
                                                    <img src="~/images/icons/Eliminar_icon.png"
                                                         alt="Eliminar icono" class="rounded-circle"
                                                         style="width: 30px; height: 30px;">
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="alert alert-success">
                    <p><strong>@Model.NombreNino</strong> no tiene tareas completadas</p>
                </div>
            }
        </div>
    </div>
</div>

<!-- Crear Tareas -->
<div class="tab-pane fade" id="subPills-create" role="tabpanel"
     aria-labelledby="subPills-create-tab">
    <div class="card-body">
        <h5 class="mb-4">Crear Nueva Tarea</h5>
        <form asp-action="Crear_Tarea" asp-controller="Tarea" method="post">
            <!-- Campo oculto para IdNino -->
            <input type="hidden" name="IdNino" value="@Model.IdNino">

            @if (ViewBag.RoleName == "Docente")
            {
                <!-- Campo de texto para el ID del docente (solo lectura) -->
                <div class="mb-3">
                    <label hidden for="IdProfesor" class="form-label">IdProfesor</label>
                    <input hidden type="text" class="form-control" id="IdProfesor"
                           name="IdProfesor"
                           value="@ViewBag.DocenteId" readonly>
                </div>
            }

            <!-- Campos comunes para crear una tarea -->
            <div class="mb-3">
                <label for="NombreTarea" class="form-label">Nombre de la Tarea</label>
                <input type="text" class="form-control" id="NombreTarea" name="Nombre" required>
            </div>
            <div class="mb-3">
                <label for="Descripcion" class="form-label">Descripción</label>
                <textarea class="form-control" id="Descripcion" name="Descripcion" rows="3"
                                              required></textarea>
            </div>
            <div class="mb-3">
                <label for="FechaEntrega" class="form-label">Fecha de Entrega</label>
                <input type="date" class="form-control" id="FechaEntrega" name="FechaEntrega"
                       required>
            </div>

            <!-- Botón de envío -->
            <button type="submit" class="btn btn-primary rounded-pill py-9 w-100 mt-24">
                Guardar
                Tarea
            </button>
        </form>
    </div>
</div>
</div>
</div>
</div>
</div>
<!-- Tareas Tab End -->

<!-- Editar Tab Start -->
<div class="tab-pane fade" id="pills-edit" role="tabpanel" aria-labelledby="pills-edit-tab"
     tabindex="0">
    <div class="card mt-24">
        <div class="card-header border-bottom">
            <h4 class="mb-4">Editar</h4>
            <p class="text-gray-600 text-15">Por favor ingresa los datos que deseas cambiar</p>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <form method="post" asp-action="Edit" asp-route-id="@Model.IdNino">
                        <div class="row gy-4">

                            <!-- Campo de texto para el nombre del niño -->
                            <div class="col-sm-6 col-xs-6">
                                <label asp-for="NombreNino" class="form-label mb-8 h6">Nombre</label>
                                <input asp-for="NombreNino" type="text" class="form-control py-11"
                                       placeholder="Nombre del Niño">
                            </div>

                            <!-- Campo de texto para la dirección -->
                            <div class="col-sm-6 col-xs-6">
                                <label asp-for="Direccion" class="form-label mb-8 h6">Dirección</label>
                                <input asp-for="Direccion" type="text" class="form-control py-11"
                                       placeholder="Dirección">
                            </div>

                            <!-- Campo de texto para la póliza -->
                            <div class="col-sm-6 col-xs-6">
                                <label asp-for="Poliza" class="form-label mb-8 h6">Póliza</label>
                                <input asp-for="Poliza" type="text" class="form-control py-11"
                                       placeholder="Póliza">
                            </div>

                            <!-- Botones de acción -->
                            <div class="col-12">
                                <div class="flex-align justify-content-end gap-8">
                                    <a asp-action="Details" asp-route-id="@Model.IdNino"
                                       class="btn btn-outline-main bg-main-100 border-main-100 text-main-600 rounded-pill py-9">
                                        Cancelar
                                    </a>
                                    <button type="submit" class="btn btn-main rounded-pill py-9">
                                        Guardar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Edit Tab End -->

<!-- Edit_Contacto_Emergencia Tab Start -->
<div class="tab-pane fade" id="pills-Edit_Contacto_Emergencia" role="tabpanel"
     aria-labelledby="pills-Edit_Contacto_Emergencia-tab">
    <div class="card mt-24">
        <div class="card-header border-bottom">
            <h4 class="mb-4">Editar Información de Contactos de Emergencia</h4>
            <p class="text-gray-600 text-15">
                Complete la información requerida sobre los contactos de
                emergencia del
                niño.
            </p>
        </div>
        <div class="card-body">
            <div class="row gy-4">
                <div class="col-md-6">
                    <form asp-action="Edit_Contacto_Emergencia" method="post">
                        <input hidden type="number" name="IdNino" id="IdNino" value="@Model.IdNino"/>

                        <!-- Sección de Contactos Existentes -->
                        <h4 class="mb-4">Contactos de Emergencia Existentes</h4>
                        @if (ViewBag.ContactosEmergencia != null && ((List<ContactosEmergencia>)ViewBag.ContactosEmergencia).Any())
                        {
                            foreach (var contacto in (List<ContactosEmergencia>)ViewBag.ContactosEmergencia)
                            {
                                <div class="form-group mb-16">
                                    <input type="hidden"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].IdContactoEmergencia"
                                           value="@contacto.IdContactoEmergencia"/>

                                    <label for="nombre_@contacto.IdContactoEmergencia"
                                           class="form-label h6">
                                        Nombre
                                    </label>
                                    <input type="text" class="form-control py-11"
                                           id="nombre_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].NombreContacto"
                                           value="@contacto.NombreContacto"/>

                                    <label for="relacion_@contacto.IdContactoEmergencia"
                                           class="form-label h6 mt-2">
                                        Relación
                                    </label>
                                    <input type="text" class="form-control py-11"
                                           id="relacion_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].Relacion"
                                           value="@contacto.Relacion"/>

                                    <label for="telefono_@contacto.IdContactoEmergencia"
                                           class="form-label h6 mt-2">
                                        Teléfono
                                    </label>
                                    <input type="tel" class="form-control py-11"
                                           id="telefono_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].Telefono"
                                           value="@contacto.Telefono" pattern="\d{7,15}"
                                           title="Debe ser un número de 7 a 15 dígitos y sin espacios"/>

                                    <label for="direccion_@contacto.IdContactoEmergencia"
                                           class="form-label h6 mt-2">
                                        Dirección
                                    </label>
                                    <input type="text" class="form-control py-11"
                                           id="direccion_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].Direccion"
                                           value="@contacto.Direccion"/>

                                    <!-- Botón para eliminar contacto -->
                                    <button type="submit" class="btn btn-danger rounded-pill py-9 mt-3"
                                            name="EliminarContactoId"
                                            value="@contacto.IdContactoEmergencia">
                                        Eliminar
                                    </button>

                                    <hr class="mt-4"/>
                                </div>
                            }

                            <!-- Botones de acción -->
                            <div class="flex-align justify-content-end gap-8">
                                <button type="reset"
                                        class="btn btn-outline-main bg-main-100 border-main-100 text-main-600 rounded-pill py-9">
                                    Cancelar
                                </button>
                                <button type="submit" class="btn btn-main rounded-pill py-9">
                                    Guardar
                                    Cambios
                                </button>
                            </div>
                        }
                        else
                        {
                            <p class="text-gray-600">No hay contactos de emergencia registrados.</p>
                        }
                    </form>

                    <form asp-action="Edit_Contacto_Emergencia_2" method="post">
                        <input hidden type="number" name="IdNino" id="IdNino" value="@Model.IdNino"/>

                        <!-- Sección para agregar un nuevo contacto -->
                        <h4 class="mb-4 mt-5">Agregar Nuevo Contacto de Emergencia</h4>
                        <div class="form-group mb-16">

                            <label for="NewNombre" class="form-label h6">Nombre</label>
                            <input type="text" class="form-control py-11" name="NewNombre"
                                   id="NewNombre"
                                   placeholder="Ingrese un nuevo Contacto"/>

                            <label for="NewRelacion" class="form-label h6 mt-2">Relación</label>
                            <input type="text" class="form-control py-11" name="NewRelacion"
                                   id="NewRelacion"
                                   placeholder="Ingrese la relación"/>

                            <label for="NewTelefono" class="form-label h6 mt-2">Teléfono</label>
                            <input type="tel" class="form-control py-11" name="NewTelefono"
                                   id="NewTelefono"
                                   placeholder="Ingrese el teléfono" pattern="\d{7,15}"
                                   title="Debe ser un número de 7 a 15 dígitos y sin espacios"/>

                            <label for="NewDireccion" class="form-label h6 mt-2">Dirección</label>
                            <input type="text" class="form-control py-11" name="NewDireccion"
                                   id="NewDireccion"
                                   placeholder="Ingrese la dirección"/>
                        </div>

                        <!-- Botones de acción -->
                        <div class="flex-align justify-content-end gap-8">
                            <button type="reset"
                                    class="btn btn-outline-main bg-main-100 border-main-100 text-main-600 rounded-pill py-9">
                                Cancelar
                            </button>
                            <button type="submit" class="btn btn-main rounded-pill py-9">
                                Guardar Cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Edit_Contacto_Emergencia Tab End -->

<!-- Información Médica - Tab de Alergias, Medicamentos y Condiciones Médicas -->
<div class="tab-pane fade" id="pills-Edit_Info_Medica" role="tabpanel"
     aria-labelledby="pills-Edit_Info_Medica-tab">
    <div class="inner d-flex justify-content-center align-items-center">
        <form asp-action="Edit_Info_Medica" asp-route-id="@Model.IdNino" method="post">
            <!-- Sección de Alergias -->
            <div class="card mt-24">
                <div class="card-header border-bottom">
                    <h4 class="mb-4">Alergias</h4>
                    <p class="text-gray-600 text-15">Seleccione las alergias que aplica al niño:</p>
                </div>
                <div class="card-body">
                    <div class="pt-24 pb-24 border-bottom border-gray-100">
                        <div class="row gy-4">
                            @foreach (var alergia in ViewBag.Alergias)
                            {
                                <div class="col-sm-6 col-xs-6">
                                    <div
                                        class="form-switch switch-primary d-flex align-items-center gap-8 mb-16">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                               id="alergia_@alergia.IdAlergia"
                                               name="IdAlergia" value="@alergia.IdAlergia"
                                               @(Model.RelNinoAlergia.Any(ra => ra.IdAlergia == alergia.IdAlergia) ? "checked" : "")/>
                                        <label
                                            class="form-check-label line-height-1 fw-medium text-secondary-light"
                                            for="alergia_@alergia.IdAlergia">
                                            @alergia.NombreAlergia
                                        </label>
                                    </div>
                                </div>
                            }
                        </div>

                        <!-- Campo de texto para una nueva alergia del niño -->
                        <div class="col-sm-6 col-xs-6">
                            <label class="form-label mb-8 h6">
                                Escria una nueva Alergia, en caso de no
                                encontarse la
                                opcion
                            </label>
                            <input type="text" class="form-control py-11"
                                   placeholder="Ingrese una Alergia"
                                   name="NewAlergia" id="NewAlegia">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección de Medicamentos -->
            <div class="card mt-24">
                <div class="card-header border-bottom">
                    <h4 class="mb-4">Medicamentos</h4>
                    <p class="text-gray-600 text-15">
                        Seleccione los medicamentos y dosis
                        correspondientes:
                    </p>
                </div>
                <div class="card-body">
                    <div class="pt-24 pb-24 border-bottom border-gray-100">
                        <div class="row gy-4">
                            @foreach (var medicamento in ViewBag.Medicamentos)
                            {
                                <div class="col-sm-6 col-xs-6">
                                    <div
                                        class="form-switch switch-primary d-flex align-items-center gap-8 mb-16">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                               id="medicamento_@medicamento.IdMedicamento"
                                               name="IdMedicamento" value="@medicamento.IdMedicamento"
                                               @(Model.RelNinoMedicamento.Any(rm => rm.IdMedicamento == medicamento.IdMedicamento) ? "checked" : "")/>
                                        <label
                                            class="form-check-label line-height-1 fw-medium text-secondary-light"
                                            for="medicamento_@medicamento.IdMedicamento">
                                            @medicamento.NombreMedicamento (Dosis: @medicamento.Dosis)
                                        </label>
                                    </div>
                                </div>
                            }
                        </div>

                        <!-- Campo de texto para un nuevo Medicamento del niño -->
                        <div class="col-sm-6 col-xs-6">
                            <label class="form-label mb-8 h6">
                                Escria un nuevo Medicamento, en caso de no
                                encontarse
                                la opcion
                            </label>
                            <input type="text" class="form-control py-11"
                                   placeholder="Ingrese un Medicamento"
                                   name="NewMedicamento" id="NewMedicamento">
                            <input type="text" class="form-control py-11" placeholder="Ingrese la Dosis"
                                   name="Dosis" id="Dosis">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección de Condiciones Médicas -->
            <div class="card mt-24">
                <div class="card-header border-bottom">
                    <h4 class="mb-4">Condiciones Médicas</h4>
                    <p class="text-gray-600 text-15">Seleccione las condiciones médicas aplicables:</p>
                </div>
                <div class="card-body">
                    <div class="pt-24 border-bottom border-gray-100">
                        <div class="row gy-4">
                            @foreach (var condicion in ViewBag.CondicionesMedicas)
                            {
                                <div class="col-sm-6 col-xs-6">
                                    <div
                                        class="form-switch switch-primary d-flex align-items-center gap-8 mb-16">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                               id="condicion_@condicion.IdCondicionMedica"
                                               name="IdCondicion" value="@condicion.IdCondicionMedica"
                                               @(Model.RelNinoCondicion.Any(rc => rc.IdCondicion == condicion.IdCondicionMedica) ? "checked" : "")/>
                                        <label
                                            class="form-check-label line-height-1 fw-medium text-secondary-light"
                                            for="condicion_@condicion.IdCondicionMedica">
                                            @condicion.NombreCondicion
                                        </label>
                                    </div>
                                </div>
                            }
                        </div>
                        <!-- Campo de texto para una nueva Condicion Medica del niño -->
                        <div class="col-sm-6 col-xs-6">
                            <label class="form-label mb-8 h6">
                                Escria una nueva Condicion Medica, en caso
                                de
                                no
                                encontarse la opcion
                            </label>
                            <input type="text" class="form-control py-11"
                                   placeholder="Ingrese la Condicion Medica"
                                   name="NewCondicion" id="NewCondicion">
                        </div>
                        <br/>
                    </div>
                </div>

                <!-- Botones de acción -->
                <div class="card-footer">
                    <div class="flex-align justify-content-end gap-8">
                        <button type="reset"
                                class="btn btn-outline-main bg-main-100 border-main-100 text-main-600 rounded-pill py-9">
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-main rounded-pill py-9">Guardar</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- Edit_Contacto_Emergencia Tab End -->

<div class="tab-pane fade" id="pills-Edit_Contacto_Emergencia" role="tabpanel"
     aria-labelledby="pills-Edit_Contacto_Emergencia-tab">
    <div class="card mt-24">
        <div class="card-header border-bottom">
            <h4 class="mb-4">Editar Información de Contactos de Emergencia</h4>
            <p class="text-gray-600 text-15">
                Complete la información requerida sobre los contactos de
                emergencia del
                niño.
            </p>
        </div>
        <div class="card-body">
            <div class="row gy-4">
                <div class="col-md-6">
                    <form asp-action="Edit_Contacto_Emergencia" method="post">
                        <input hidden type="number" name="IdNino" id="IdNino" value="@Model.IdNino"/>

                        <!-- Sección de Contactos Existentes -->
                        <h4 class="mb-4">Contactos de Emergencia Existentes</h4>
                        @if (ViewBag.ContactosEmergencia != null && ((List<ContactosEmergencia>)ViewBag.ContactosEmergencia).Any())
                        {
                            foreach (var contacto in (List<ContactosEmergencia>)ViewBag.ContactosEmergencia)
                            {
                                <div class="form-group mb-16">
                                    <input type="hidden"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].IdContactoEmergencia"
                                           value="@contacto.IdContactoEmergencia"/>

                                    <label for="nombre_@contacto.IdContactoEmergencia"
                                           class="form-label h6">
                                        Nombre
                                    </label>
                                    <input type="text" class="form-control py-11"
                                           id="nombre_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].NombreContacto"
                                           value="@contacto.NombreContacto"/>

                                    <label for="relacion_@contacto.IdContactoEmergencia"
                                           class="form-label h6 mt-2">
                                        Relación
                                    </label>
                                    <input type="text" class="form-control py-11"
                                           id="relacion_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].Relacion"
                                           value="@contacto.Relacion"/>

                                    <label for="telefono_@contacto.IdContactoEmergencia"
                                           class="form-label h6 mt-2">
                                        Teléfono
                                    </label>
                                    <input type="tel" class="form-control py-11"
                                           id="telefono_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].Telefono"
                                           value="@contacto.Telefono" pattern="\d{7,15}"
                                           title="Debe ser un número de 7 a 15 dígitos y sin espacios"/>

                                    <label for="direccion_@contacto.IdContactoEmergencia"
                                           class="form-label h6 mt-2">
                                        Dirección
                                    </label>
                                    <input type="text" class="form-control py-11"
                                           id="direccion_@contacto.IdContactoEmergencia"
                                           name="ContactosExistentes[@contacto.IdContactoEmergencia].Direccion"
                                           value="@contacto.Direccion"/>

                                    <!-- Botón para eliminar contacto -->
                                    <button type="submit" class="btn btn-danger rounded-pill py-9 mt-3"
                                            name="EliminarContactoId"
                                            value="@contacto.IdContactoEmergencia">
                                        Eliminar
                                    </button>

                                    <hr class="mt-4"/>
                                </div>
                            }

                            <!-- Botones de acción -->
                            <div class="flex-align justify-content-end gap-8">
                                <button type="reset"
                                        class="btn btn-outline-main bg-main-100 border-main-100 text-main-600 rounded-pill py-9">
                                    Cancelar
                                </button>
                                <button type="submit" class="btn btn-main rounded-pill py-9">
                                    Guardar
                                    Cambios
                                </button>
                            </div>
                        }
                        else
                        {
                            <p class="text-gray-600">No hay contactos de emergencia registrados.</p>
                        }
                    </form>

                    <form asp-action="Edit_Contacto_Emergencia_2" method="post">
                        <input hidden type="number" name="IdNino" id="IdNino" value="@Model.IdNino"/>

                        <!-- Sección para agregar un nuevo contacto -->
                        <h4 class="mb-4 mt-5">Agregar Nuevo Contacto de Emergencia</h4>
                        <div class="form-group mb-16">

                            <label for="NewNombre" class="form-label h6">Nombre</label>
                            <input type="text" class="form-control py-11" name="NewNombre"
                                   id="NewNombre"
                                   placeholder="Ingrese un nuevo Contacto"/>

                            <label for="NewRelacion" class="form-label h6 mt-2">Relación</label>
                            <input type="text" class="form-control py-11" name="NewRelacion"
                                   id="NewRelacion"
                                   placeholder="Ingrese la relación"/>

                            <label for="NewTelefono" class="form-label h6 mt-2">Teléfono</label>
                            <input type="tel" class="form-control py-11" name="NewTelefono"
                                   id="NewTelefono"
                                   placeholder="Ingrese el teléfono" pattern="\d{7,15}"
                                   title="Debe ser un número de 7 a 15 dígitos y sin espacios"/>

                            <label for="NewDireccion" class="form-label h6 mt-2">Dirección</label>
                            <input type="text" class="form-control py-11" name="NewDireccion"
                                   id="NewDireccion"
                                   placeholder="Ingrese la dirección"/>
                        </div>

                        <!-- Botones de acción -->
                        <div class="flex-align justify-content-end gap-8">
                            <button type="reset"
                                    class="btn btn-outline-main bg-main-100 border-main-100 text-main-600 rounded-pill py-9">
                                Cancelar
                            </button>
                            <button type="submit" class="btn btn-main rounded-pill py-9">
                                Guardar Cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Edit_Contacto_Emergencia Tab End -->

<!-- Información Médica - Tab de Alergias, Medicamentos y Condiciones Médicas -->
<div class="tab-pane fade" id="pills-Edit_Info_Medica" role="tabpanel" aria-labelledby="pills-Edit_Info_Medica-tab">
    <div class="inner d-flex justify-content-center align-items-center">
        <form asp-action="Edit_Info_Medica" asp-route-id="@Model.IdNino" method="post">
            <!-- Sección de Alergias -->
            <div class="card mt-24">
                <div class="card-header border-bottom">
                    <h4 class="mb-4">Alergias</h4>
                    <p class="text-gray-600 text-15">Seleccione las alergias que aplica al niño:</p>
                </div>
                <div class="card-body">
                    <div class="pt-24 pb-24 border-bottom border-gray-100">
                        <div class="row gy-4">
                            @foreach (var alergia in ViewBag.Alergias)
                            {
                                <div class="col-sm-6 col-xs-6">
                                    <div
                                        class="form-switch switch-primary d-flex align-items-center gap-8 mb-16">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                               id="alergia_@alergia.IdAlergia"
                                               name="IdAlergia" value="@alergia.IdAlergia"
                                               @(Model.RelNinoAlergia.Any(ra => ra.IdAlergia == alergia.IdAlergia) ? "checked" : "")/>
                                        <label
                                            class="form-check-label line-height-1 fw-medium text-secondary-light"
                                            for="alergia_@alergia.IdAlergia">
                                            @alergia.NombreAlergia
                                        </label>
                                    </div>
                                </div>
                            }
                        </div>

                        <!-- Campo de texto para una nueva alergia del niño -->
                        <div class="col-sm-6 col-xs-6">
                            <label class="form-label mb-8 h6">
                                Escria una nueva Alergia, en caso de no
                                encontarse la
                                opcion
                            </label>
                            <input type="text" class="form-control py-11"
                                   placeholder="Ingrese una Alergia"
                                   name="NewAlergia" id="NewAlegia">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección de Medicamentos -->
            <div class="card mt-24">
                <div class="card-header border-bottom">
                    <h4 class="mb-4">Medicamentos</h4>
                    <p class="text-gray-600 text-15">
                        Seleccione los medicamentos y dosis
                        correspondientes:
                    </p>
                </div>
                <div class="card-body">
                    <div class="pt-24 pb-24 border-bottom border-gray-100">
                        <div class="row gy-4">
                            @foreach (var medicamento in ViewBag.Medicamentos)
                            {
                                <div class="col-sm-6 col-xs-6">
                                    <div
                                        class="form-switch switch-primary d-flex align-items-center gap-8 mb-16">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                               id="medicamento_@medicamento.IdMedicamento"
                                               name="IdMedicamento" value="@medicamento.IdMedicamento"
                                               @(Model.RelNinoMedicamento.Any(rm => rm.IdMedicamento == medicamento.IdMedicamento) ? "checked" : "")/>
                                        <label
                                            class="form-check-label line-height-1 fw-medium text-secondary-light"
                                            for="medicamento_@medicamento.IdMedicamento">
                                            @medicamento.NombreMedicamento (Dosis: @medicamento.Dosis)
                                        </label>
                                    </div>
                                </div>
                            }
                        </div>

                        <!-- Campo de texto para un nuevo Medicamento del niño -->
                        <div class="col-sm-6 col-xs-6">
                            <label class="form-label mb-8 h6">
                                Escria un nuevo Medicamento, en caso de no
                                encontarse
                                la opcion
                            </label>
                            <input type="text" class="form-control py-11"
                                   placeholder="Ingrese un Medicamento"
                                   name="NewMedicamento" id="NewMedicamento">
                            <input type="text" class="form-control py-11" placeholder="Ingrese la Dosis"
                                   name="Dosis" id="Dosis">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección de Condiciones Médicas -->
            <div class="card mt-24">
                <div class="card-header border-bottom">
                    <h4 class="mb-4">Condiciones Médicas</h4>
                    <p class="text-gray-600 text-15">Seleccione las condiciones médicas aplicables:</p>
                </div>
                <div class="card-body">
                    <div class="pt-24 border-bottom border-gray-100">
                        <div class="row gy-4">
                            @foreach (var condicion in ViewBag.CondicionesMedicas)
                            {
                                <div class="col-sm-6 col-xs-6">
                                    <div
                                        class="form-switch switch-primary d-flex align-items-center gap-8 mb-16">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                               id="condicion_@condicion.IdCondicionMedica"
                                               name="IdCondicion" value="@condicion.IdCondicionMedica"
                                               @(Model.RelNinoCondicion.Any(rc => rc.IdCondicion == condicion.IdCondicionMedica) ? "checked" : "")/>
                                        <label
                                            class="form-check-label line-height-1 fw-medium text-secondary-light"
                                            for="condicion_@condicion.IdCondicionMedica">
                                            @condicion.NombreCondicion
                                        </label>
                                    </div>
                                </div>
                            }
                        </div>
                        <!-- Campo de texto para una nueva Condicion Medica del niño -->
                        <div class="col-sm-6 col-xs-6">
                            <label class="form-label mb-8 h6">
                                Escria una nueva Condicion Medica, en caso
                                de
                                no
                                encontarse la opcion
                            </label>
                            <input type="text" class="form-control py-11"
                                   placeholder="Ingrese la Condicion Medica"
                                   name="NewCondicion" id="NewCondicion">
                        </div>
                        <br/>
                    </div>
                </div>

                <!-- Botones de acción -->
                <div class="card-footer">
                    <div class="flex-align justify-content-end gap-8">
                        <button type="reset"
                                class="btn btn-outline-main bg-main-100 border-main-100 text-main-600 rounded-pill py-9">
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-main rounded-pill py-9">Guardar</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Sección de Asistencias -->
<div class="tab-pane fade" id="pills-Asistencias" role="tabpanel" aria-labelledby="pills-Asistencias-tab"
     tabindex="0">
    <div class="card mt-24">
        <div class="card-header border-bottom">
            <h4 class="mb-4">Asistencias</h4>
        </div>
        <div class="card-body">
            <form method="get" asp-action="Details" asp-route-id="@Model.IdNino">
                <div class="row mb-4">
                    <input type="hidden" name="id" value="@Model.IdNino"/>
                    <div class="col-md-4">
                        <label for="fechaInicio" class="form-label">Desde:</label>
                        <input type="date" id="fechaInicio" name="fechaInicio" class="form-control"
                               value="@ViewBag.FechaInicio"/>
                    </div>
                    <div class="col-md-4">
                        <label for="fechaFin" class="form-label">Hasta:</label>
                        <input type="date" id="fechaFin" name="fechaFin" class="form-control"
                               value="@ViewBag.FechaFin"/>
                    </div>
                    <div class="col-md-4 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100">Filtrar</button>
                    </div>
                </div>
            </form>
            @if (Model.Asistencia != null && Model.Asistencia.Any())
            {
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th scope="col" class="text-gray-600 text-start">Fecha</th>
                        <th scope="col" class="text-gray-600 text-start">Estado</th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach (var asistencia in Model.Asistencia)
                    {
                        <tr>
                            <td class="text-start">@asistencia.Fecha.ToString("dd/MM/yyyy")</td>
                            <td class="text-start">
                                <span class="fw-medium @(asistencia.Presente ? "text-success" : "text-danger")">
                                    @(asistencia.Presente ? "Presente" : "Ausente")
                                </span>
                            </td>
                        </tr>
                    }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-gray-600">No hay asistencias registradas para este niño.</p>
            }
        </div>
    </div>
</div>
</div>